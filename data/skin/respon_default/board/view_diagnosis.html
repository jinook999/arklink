{#header}
<!-- <script type="text/javascript" src="/lib/js/common_board.js"></script> -->
<script type="text/javascript" src="{js}/js/common_board.js"></script>
<script type="text/javascript" >
	var Common_Board = new common_board({
		code : "{board_info['code']}",
		no : "{board_view['board_view']['no']}",
		is_login : "{=defined('_IS_LOGIN')}",
		nonMember_title : "{terms['nonMember']['title']}",
	});

	$(function() {
		$("form[name='comment_frm']").validate({
			rules : {
				name : {required : true},
				password : {required : true, rangelength : [4, 20]},
				//content : {required : {depends : function(){return !getSmartEditor("comment");}}},
				content : {required : true},
				file : {}
			}, messages : {
				name : {required : "작성자를 입력해주세요."},
				password : {required : "비밀번호를 입력해주세요.", rangelength: $.validator.format("비밀번호는 {0}~{1}자입니다.")},
				content : {required : "내용을 입력해주세요."},
				file : {}
			}
		});
	});

	function comment_modify_display(idx, is_display) {
		var display_comment = $("#display_comment_"+ idx);

		if(is_display) {
			$("#modify_comment_content_"+ idx +", #modify_comment_btn_"+ idx, display_comment).removeClass("hide");
			$("#view_comment_btn_"+ idx + ", #view_comment_content_"+ idx, display_comment).addClass("hide");
		} else {
			$("#modify_comment_content_"+ idx +", #modify_comment_btn_"+ idx, display_comment).addClass("hide");
			$("#view_comment_btn_"+ idx + ", #view_comment_content_"+ idx, display_comment).removeClass("hide");
		}
	}

	function comment_modify_check(idx, is_secret) {
		var display_comment = $("#display_comment_"+ idx);
		$("[name='mode_"+ idx +"']", display_comment).val("modify");

		if(is_secret == 'y') {
			comment_modify_display(idx, true);
		} else {
			$("#layer_password_"+ idx, display_comment).addClass("modify").removeClass("hide").find(":password").focus();
		}
	}

	function comment_delete_check(idx, is_secret) {
		var display_comment = $("#display_comment_"+ idx);
		$("[name='mode_"+ idx +"']", display_comment).val("delete");

		if(is_secret == 'y') {
			Common_Board.board_comment_delete(idx);
		} else {
			$("#layer_password_"+ idx, display_comment).removeClass("modify").removeClass("hide").find(":password").focus();
		}
	}

	function comment_password_layer_close(idx) {
		var display_comment = $("#display_comment_"+ idx);
		$("#layer_password_"+ idx).addClass("hide");
		$("[name='password_"+ idx +"']", display_comment).val("");
	}

	function comment_password_enter(idx) {
		if (event.keyCode == 13) {
			Common_Board.board_comment_password_check(idx);
		}
	}
</script>
<div class="sub_content">
	<div class="sub_board">
		<div class="bbs_view">
			<!--예비필드 노출-->
			<!--{ @ array('ex1', 'ex2', 'ex20', 'ex3', 'ex4', 'ex5', 'ex6', 'ex7', 'ex8', 'ex17', 'ex18', 'ex9', 'ex10', 'ex21', 'ex11', 'ex12', 'ex13', 'ex14', 'ex15', 'ex16' ) }-->
				<!--{ ? extraFieldData[.value_] }-->
				<div class="extra_editor_wrap">
					<h4>{ extraFieldData[.value_]['name'] }</h4>
					<div class="extra_cont <!--{ ? extraFieldData[.value_]['type'] == 'editor' }-->view_cont yui3-cssreset<!--{ / }-->">
						<!--{ ? .type == 'all' }-->
						<a href="{=.link}&save={=urlencode(.original_file_name)}" style="color:cornflowerblue;" download/>{=.original_file_name}</a>
						<!--{ : .type == 'video' }-->
						<video id="" src="{=.link}" controls width="100%"></video>
						<!--{ : }-->
						{ extraFieldData[.value_]['value'] }
						<!--{ / }-->
					</div>
				</div>
				<!--{ / }-->
			<!--{ / }-->
			<!--{ @ array('ex25', 'ex27', 'ex29') }-->
			<!--{ ? extraFieldData[.value_] }-->
			<div class="extra_editor_wrap">
				<h4>{ extraFieldData[.value_]['name'] }</h4>
				<div class="extra_cont {extraFieldData[.value_]['no']}">
					{? extraFieldData[.value_]['name'] == '악성 파일 업로드'}
					<a href="{ extraFieldData['ex26']['link'] }" style="color:cornflowerblue;" download/>{ extraFieldData['ex26']['original_file_name'] }</a>
					{: extraFieldData[.value_]['name'] == '대화 내용 업로드'}
					<a href="{ extraFieldData['ex28']['link'] }" style="color:cornflowerblue;" download/>{ extraFieldData['ex28']['original_file_name'] }</a>
					{: extraFieldData[.value_]['name'] == '방문 기록 업로드'}
					<a href="{ extraFieldData['ex30']['link'] }" style="color:cornflowerblue;" download/>{ extraFieldData['ex30']['original_file_name'] }</a>
					{/}
				</div>
			</div>
			<!--{ / }-->
			<!--{ / }-->
		</div><!--bbs_view-->
		<div class="view_btn">
			<div class="btn_wrap ta_left">
                <!--{ ? board_info['code'] != 'diagnosis'}-->
				<a href="/board/board_list?code={board_info['code']}" class="btn">목록으로</a>
                <!--{ / }-->
				<!--{ ? board_view['is_delete'] == 'y' }-->
				<a href="/board/board_delete?code={board_info['code']}&no={board_view['board_view']['no']}" class="btn_basic btn">삭제</a>
				<!--{ : board_view['is_modify'] == 's' }-->
				<a href="/board/board_secret?code={board_info['code']}&no={board_view['board_view']['no']}&page=delete" class="btn_basic btn">삭제</a>
				<!--{ / }-->
				<!--{ ? board_info['tree'] == 'y' }-->
				<!--{ ? board_view['is_answer_write'] == 'y' }-->
				<a href="/board/board_write?code={board_info['code']}&no={board_view['board_view']['no']}&cref={board_view['board_view']['no']}" class="btn_basic btn">답글</a>
				<!--{ / }-->
				<!--{ / }-->
				<!--{ ? board_info['QNA_BOARD'] == board_info['board_type'] }-->
				<!--{ ? board_info['is_inquire_answer'] }-->
				<a href="/board/board_write?code={board_info['code']}&no={board_view['board_view']['no']}&answer_status={board_view['board_view']['answer_status']}" class="btn_basic btn"><!--{ ? board_view['board_view']['answer_status'] == "y" }-->답변수정<!--{ : }-->답변등록<!--{ / }--></a>
				<!--{ / }-->
				<!--{ / }-->
			</div>
		</div><!--view_btn-->
	</div>
</div>
{#footer}