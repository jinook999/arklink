{#header}
<script>
	$(function() {
		$("form[name='frm']").validate({
			submitHandler: function(form) {
				form.submit();
			}, rules : {
				old_password : {required : {depends : function() { return $("[name='mode']").val() == "change";}}}, 
				password : {required : {depends : function() { return $("[name='mode']").val() == "change";}}, rangelength : [10, 16], equalTo : "#password2", passwordValid : {depends : function() {return $("[name='mode']").val() == "change";}}},
				password2 : {required : {depends : function() { return $("[name='mode']").val() == "change";}}, rangelength : [10, 16], passwordValid : {depends : function() {return $("[name='mode']").val() == "change";}}}
			}, messages : {
				old_password : {required : "{memberField['name'][cfg_site['language']]['password']}를 입력해주세요."}, 
				password : {required : "새 {memberField['name'][cfg_site['language']]['password']}를 입력해주세요.", rangelength: $.validator.format("{memberField['name'][cfg_site['language']]['password']}는 {0}~{1}자입니다."), equalTo : "새 {memberField['name'][cfg_site['language']]['password']}가 일치하지 않습니다.", passwordValid : "{memberField['name'][cfg_site['language']]['password']}는 영어/숫자/특수문자를 2종류 이상 혼용하여 사용해야 합니다."},
				password2 : {required : "새 {memberField['name'][cfg_site['language']]['password']} 확인을 입력해주세요.", rangelength: $.validator.format("{memberField['name'][cfg_site['language']]['password']}는 {0}~{1}자입니다."), passwordValid : "{memberField['name'][cfg_site['language']]['password']}는 영어/숫자/특수문자를 2종류 이상 혼용하여 사용해야 합니다."}
			}
		});
	})

	function change_chk(form, mode) {
		if(mode == false) {
			if(confirm("1개월 후에 변경하시겠습니까?")) {
				form.mode.value = "nextChange";
			} else {
				return false;
			}
		} else {
			form.mode.value = "change";
		}
		return true;
	}
</script>

<div class="sub_content">
	<div class="sub_login add">
		<div class="login_box">
			<h2 class="bbs_write_title">비밀번호 변경</h2>
			{=form_open('member/periodic_change_pw', 'name=frm')}
			<input type="hidden" name="mode" /> 
			<table class="bbs_write" summary="비밀번호 변경">
				<caption>* 영문 대·소문자/숫자/특수문자 중 2가지 이상을 혼용하여 10~16자 이내로 작성해주세요.</caption>
				<colgroup>
					<col width="15%">
					<col >
				</colgroup>
				<tbody>
					<tr>
						<th scope="row">현재 비밀번호</th>
						<td><input type="password" id="changepw1" name="old_password" value=""><label for="changepw1" class="dn">현재 비밀번호</label></td>
					</tr>
					<tr>
						<th scope="row">새 비밀번호</th>
						<td><input type="password" id="changepw2" name="password" value=""><label for="changepw2" class="dn">새 비밀번호</label></td>
					</tr>
					<tr>
						<th scope="row">새 비밀번호 확인</th>
						<td><input type="password" id="password2" name="password2" value=""><label for="changepw3" class="dn">새 비밀번호 확인</label></td>
					</tr>
				</tbody>
			</table><!-- .bbs_write -->
			<p class="bbs_write_info">현재 같은 비밀번호를 3개월 이상 사용하셨습니다.<br/>안전한 개인정보 보호를 위하여 <strong>비밀번호는 주기적으로 변경</strong>할 것을 권해드립니다.</p>
			<div class="btn_wrap ta_center">
				<button onclick="return change_chk(this.form, true);" class="btn btn_point">변경하기</button>
				<!--{ ? member['password_skip_cnt'] < 5 }--><button onclick="return change_chk(this.form, false);" class="btn btn_basic">다음에</button><!--{ / }-->
			</div><!-- .btn_center -->
			{=form_close()}
		</div><!--login_box-->
	</div><!--sub_login-->

</div><!--sub_login-->
{#footer}